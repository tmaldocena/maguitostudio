---
// src/components/Modal.astro
---

<!-- Modal Overlay -->
<div id="modal-overlay" class="modal-overlay">
  <!-- Modal Container -->
  <div id="modal-container" class="modal-container">
    <!-- Bot√≥n de cerrar -->
    <button id="modal-close" class="modal-close" aria-label="Cerrar modal">
      ‚úï
    </button>
    
    <!-- Contenido del modal -->
    <div class="modal-content">
      <h2 class="font-display text-4xl md:text-5xl text-(--cream) mb-6 text-center">
        ¬øQu√© pack elegir?
      </h2>
      
      <div class="space-y-6 text-(--dark)">
        <!-- Intro -->
        <p class="text-lg font-text leading-relaxed text-(--cream)">
          Elegir el pack adecuado depende de tus necesidades y objetivos. Ac√° te ayudamos a decidir:
        </p>
        
        <!-- Pack B√°sico -->
        <div class="bg-(--secondary) border-4 border-(--dark) rounded-3xl p-6 shadow-[8px_8px_0_var(--dark)]">
          <h3 class="font-display text-2xl mb-3">
            Chispa M√°gica
          </h3>
          <p class="font-text leading-relaxed mb-3">
            <strong>Ideal para:</strong> Emprendimientos nuevos, freelancers o peque√±os negocios que reci√©n arrancan.
          </p>
          <p class="font-text leading-relaxed">
            <strong>Te sirve si:</strong> Necesit√°s lo esencial para empezar con presencia digital profesional sin una inversi√≥n grande.
          </p>
        </div>
        
        <!-- Pack Profesional -->
        <div class="bg-(--orange) border-4 border-(--dark) rounded-3xl p-6 shadow-[8px_8px_0_var(--dark)] relative">
          <!-- Badge de recomendado -->
          <div class="absolute -top-3 -right-3 bg-(--cream) border-3 border-(--dark) rounded-full px-4 py-1 font-display text-(--dark) text-sm shadow-[3px_3px_0_var(--dark)]">
            ‚≠ê M√°s elegido
          </div>
          
          <h3 class="font-display text-2xl mb-3">
            Hechizo Creativo
          </h3>
          <p class="font-text leading-relaxed mb-3">
            <strong>Ideal para:</strong> Negocios en crecimiento que buscan consolidar su marca y aumentar su presencia online.
          </p>
          <p class="font-text leading-relaxed">
            <strong>Te sirve si:</strong> Ya ten√©s clientes y quer√©s proyectar una imagen m√°s profesional con un sitio web completo y optimizado.
          </p>
        </div>
        
        <!-- Pack Premium -->
        <div class="bg-(--yellow) border-4 border-(--dark) rounded-3xl p-6 shadow-[8px_8px_0_var(--dark)]">
          <h3 class="font-display text-2xl mb-3">
            Magia Total
          </h3>
          <p class="font-text leading-relaxed mb-3">
            <strong>Ideal para:</strong> Empresas establecidas o proyectos ambiciosos que necesitan una soluci√≥n digital integral.
          </p>
          <p class="font-text leading-relaxed">
            <strong>Te sirve si:</strong> Quer√©s el paquete completo con estrategia digital, sin l√≠mites en el desarrollo y con posicionamiento SEO profesional.
          </p>
        </div>
        
        <!-- Nota final -->
        <div class="bg-(--cream) border-4 border-(--dark) rounded-3xl p-6 shadow-[8px_8px_0_var(--dark)] text-center">
          <p class="text-xl font-display mb-2">
            ¬øNo est√°s seguro o necesit√°s algo diferente?
          </p>
          <p class="font-text">
            ¬°No hay problema! Podemos armar un paquete personalizado para vos. Scrolle√° hasta el formulario de contacto y contanos qu√© necesit√°s üöÄ
          </p>
        </div>
      </div>
      
      <!-- Bot√≥n de cerrar abajo -->
      <div class="mt-8 text-center">
        <button 
          id="modal-close-bottom"
          class="mx-auto block inline-flex items-center justify-center whitespace-nowrap rounded-[9999px] border-4 shadow-[8px_8px_0_var(--dark)] transition-transform duration-300 transform hover:-translate-y-4 hover:-rotate-2 text-xl"
          style="background:var(--yellow); color:var(--dark); border-color:var(--dark); font-family:var(--font-display); padding: 4px 48px;"
        >
          ¬°Entendido!
        </button>
      </div>
    </div>
  </div>
</div>

<style>
  /* Overlay del modal */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(44, 44, 44, 0.8);
    backdrop-filter: blur(8px);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    
    /* Inicialmente oculto */
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }
  
  .modal-overlay.active {
    opacity: 1;
    pointer-events: all;
  }
  
  /* Contenedor del modal */
  .modal-container {
    position: relative;
    background: var(--color-cream);
    border: 5px solid var(--color-dark);
    border-radius: 40px;
    padding: 3rem;
    max-width: 700px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 12px 12px 0 var(--color-dark);
    
    /* Animaci√≥n de entrada */
    transform: scale(0.8) translateY(50px) rotate(-5deg);
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }
  
  .modal-overlay.active .modal-container {
    transform: scale(1) translateY(0) rotate(0deg);
  }
  
  /* Bot√≥n de cerrar */
  .modal-close {
    position: absolute;
    top: 1rem;
    right: 1rem;
    width: 50px;
    height: 50px;
    background: var(--color-pink);
    border: 4px solid var(--color-dark);
    border-radius: 50%;
    color: white;
    font-size: 1.5rem;
    font-weight: bold;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    box-shadow: 4px 4px 0 var(--color-dark);
    z-index: 10;
  }
  
  .modal-close:hover {
    transform: rotate(90deg) scale(1.1);
    background: var(--color-orange);
    box-shadow: 6px 6px 0 var(--color-dark);
  }
  
  /* Scroll personalizado */
  .modal-container::-webkit-scrollbar {
    width: 10px;
  }
  
  .modal-container::-webkit-scrollbar-track {
    background: var(--color-cream);
    border-radius: 10px;
  }
  
  .modal-container::-webkit-scrollbar-thumb {
    background: var(--color-orange);
    border-radius: 10px;
    border: 2px solid var(--color-dark);
  }
  
  .modal-container::-webkit-scrollbar-thumb:hover {
    background: var(--color-pink);
  }
  
  /* Responsive */
  @media (max-width: 640px) {
    .modal-container {
      padding: 2rem 1.5rem;
      border-radius: 30px;
      box-shadow: 8px 8px 0 var(--color-dark);
    }
    
    .modal-close {
      width: 40px;
      height: 40px;
      font-size: 1.2rem;
      top: 0.5rem;
      right: 0.5rem;
    }
  }
</style>

<script>
  // Funciones para controlar el modal
  function openModal() {
    const overlay = document.getElementById('modal-overlay');
    if (overlay) {
      overlay.classList.add('active');
      document.body.style.overflow = 'hidden'; // Prevenir scroll del body
    }
  }
  
  function closeModal() {
    const overlay = document.getElementById('modal-overlay');
    if (overlay) {
      overlay.classList.remove('active');
      document.body.style.overflow = ''; // Restaurar scroll
    }
  }
  
  // Event listeners
  document.addEventListener('DOMContentLoaded', () => {
    const closeBtn = document.getElementById('modal-close');
    const closeBottomBtn = document.getElementById('modal-close-bottom');
    const overlay = document.getElementById('modal-overlay');
    
    // Cerrar con el bot√≥n X
    if (closeBtn) {
      closeBtn.addEventListener('click', closeModal);
    }
    
    // Cerrar con bot√≥n "¬°Entendido!"
    if (closeBottomBtn) {
      closeBottomBtn.addEventListener('click', closeModal);
    }
    
    // Cerrar al hacer click fuera del modal
    if (overlay) {
      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) {
          closeModal();
        }
      });
    }
    
    // Cerrar con tecla ESC
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeModal();
      }
    });
  });
  
  // Exportar funci√≥n para uso global
  (window as any).openModal = openModal;
</script>