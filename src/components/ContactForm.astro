<section
    class="min-h-screen bg-(--dark) text-(--white) flex items-center justify-center relative py-12"
    id="contacto"
>
    <!-- Left & Right SVG hands (place in /public/assets) -->
    <img
        src="./pointing.svg"
        alt="pointing hand"
        class="pointer-events-none absolute md:block hidden left-0 top-1/4 transform -translate-y-1/2 -translate-x-1/4 w-48 md:w-72 animate-bounce-custom"
    />
    <img
        src="./thumb.svg"
        alt="thumbs up hand"
        class="pointer-events-none absolute md:block hidden right-0 top-3/4 transform -translate-y-1/2 translate-x-1/4 w-48 md:w-72 animate-bounce-custom delay-1000"
    />

    <div class="w-full max-w-3xl px-6">
        <header class="text-center mb-16">
            <h1
                class="text-3xl md:text-4xl font-display text-(--cream) tracking-tight"
            >
                ¿Listo para invocar un proyecto juntos?
            </h1>
            <p class="mt-3 text-lg font-text text-(--cream)">
                Escribime y lo charlamos ✨
            </p>
        </header>

        <form class="font-text" aria-label="Contacto">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <label class="sr-only" for="name">Nombre</label>
                <input
                    id="name"
                    name="name"
                    type="text"
                    placeholder="Nombre"
                    required
                    class="w-full rounded-lg border-4 border-(--yellow) bg-transparent px-4 py-6 placeholder-yellow-200 focus:outline-none focus:ring-2 focus:ring-yellow-300 text-(--cream)"
                />

                <label class="sr-only" for="email">Email</label>
                <input
                    id="email"
                    name="email"
                    type="email"
                    required
                    placeholder="Email"
                    class="w-full rounded-lg border-4 border-(--yellow) bg-transparent px-4 py-6 placeholder-yellow-200 focus:outline-none focus:ring-2 focus:ring-yellow-300 text-(--cream)"
                />
            </div>

            <div class="mb-6">
                <label class="sr-only" for="subject">Asunto</label>
                <input
                    id="subject"
                    name="subject"
                    type="text"
                    required
                    placeholder="Asunto (Podés poner el pack que te interesa acá)"
                    class="w-full rounded-lg border-4 border-(--yellow) bg-transparent px-4 py-6 placeholder-yellow-200 focus:outline-none focus:ring-2 focus:ring-yellow-300 text-(--cream)"
                />
            </div>

            <div class="mb-6">
                <label class="sr-only" for="message">Mensaje</label>
                <textarea
                    id="message"
                    name="message"
                    rows="6"
                    placeholder="Contame sobre tu proyecto o idea..."
                    class="w-full rounded-lg border-4 border-(--yellow) bg-transparent px-4 py-4 placeholder-yellow-200 focus:outline-none focus:ring-2 focus:ring-yellow-300 text-(--cream)"
                ></textarea>
            </div>

            <div class="mb-8">
                <button
                    type="submit"
                    class="mx-auto w-full inline-flex items-center justify-center whitespace-nowrap rounded-[9999px] border-4 shadow-[8px_8px_0_var(--dark)] transition-transform duration-300 transform hover:-translate-y-4 hover:-rotate-2 text-xl"
                    style="background:var(--yellow); color:var(--dark); border-color:var(--dark); font-family:var(--font-display); padding: 8px 32px;"
                    >Enviar</button
                >
            </div>

            <!-- small separator dot -->
            <div class="flex justify-center py-2 mb-2">
                <span class="font-display text-(--cream) text-lg">o</span>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <a
                    href="https://wa.link/wo65t7"
                    target="_blank"
                    rel="nonrefferer"
                    class="mx-auto w-full block inline-flex items-center justify-center whitespace-nowrap rounded-[9999px] border-4 shadow-[8px_8px_0_var(--dark)] transition-transform duration-300 transform hover:-translate-y-4 hover:-rotate-2 text-xl"
                    style="background:var(--secondary); color:var(--dark); border-color:var(--dark); font-family:var(--font-display); padding: 8px 32px;"
                    >Whatsapp</a
                >
                <a
                    href="https://www.instagram.com/maguito.std"
                    target="_blank"
                    rel="nonrefferer"
                    class="mx-auto w-full block inline-flex items-center justify-center whitespace-nowrap rounded-[9999px] border-4 shadow-[8px_8px_0_var(--dark)] transition-transform duration-300 transform hover:-translate-y-4 hover:-rotate-2 text-xl"
                    style="background:var(--orange); color:var(--dark); border-color:var(--dark); font-family:var(--font-display); padding: 8px 32px;"
                    >Instagram</a
                >
            </div>
        </form>
    </div>

    <div
        id="toast"
        class="fixed bottom-24 left-6 right-6 md:left-auto md:right-6 md:w-96 bg-(--yellow) text-(--dark) px-6 py-4 rounded-lg shadow-[8px_8px_0_var(--dark)] border-4 border-(--dark) opacity-0 translate-y-20 transition-all duration-500 pointer-events-none flex items-center gap-3 font-display z-10"
    >
        <svg
            class="w-6 h-6 shrink-0"
            fill="currentColor"
            viewBox="0 0 20 20"
        >
            <path
                fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                clip-rule="evenodd"></path>
        </svg>
        <div>
            <p class="font-bold">¡Enviado!</p>
            <p class="text-sm">
                Tu consulta fue recibida. Pronto te respondemos ✨
            </p>
        </div>
    </div>
</section>

<style>
    @keyframes bounce {
        0%,
        100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-10px);
        }
    }
    .animate-bounce-custom {
        animation: bounce 2s ease-in-out infinite;
    }

    #toast.show {
        opacity: 1;
        transform: translateY(0);
    }
</style>

<script>
    const handleSubmit = (event) => {
        event.preventDefault();
        const dataEntries = event.target.elements;

        const form = new FormData();

        console.log(dataEntries.name.value)
        console.log(dataEntries.email.value)
        console.log(dataEntries.subject.value)
        console.log(dataEntries.message.value)

        form.append("name", dataEntries.name.value);
        form.append("email", dataEntries.email.value);
        form.append("subject", dataEntries.subject.value);
        form.append("message", dataEntries.message.value);

        console.log(form.values);
        fetch(
            "https://script.google.com/macros/s/AKfycbzQwI2WN6GtqQ5OiYJm3YdP6Un5K8nvFrTT_ZcWdDu38O2Nmr8-NsKWyCcrYSzjH4FEAQ/exec",
            {
                method: "POST",
                body: form,
            },
        )
            .then((data) => {
                console.log("Success:", data);
                // Mostrar toast
                const toast = document.getElementById("toast");
                if (toast) {
                    toast.classList.add("show");

                    // Ocultar toast después de 4 segundos
                    setTimeout(() => {
                        toast.classList.remove("show");
                        window.location.reload();
                    }, 4000);
                }
            })
            .catch((err) => {
                console.error("Error:", err);
                // Mostrar toast de error si quieres
                const toast = document.getElementById("toast");
                if (toast) {
                    toast.textContent = "Error al enviar. Intenta de nuevo.";
                    toast.classList.add("show");

                    setTimeout(() => {
                        toast.classList.remove("show");
                        window.location.reload();
                    }, 4000);
                }
            });
    }; 

    const form = document.querySelector('form[aria-label="Contacto"]');
    form?.addEventListener('submit', handleSubmit);
</script>
